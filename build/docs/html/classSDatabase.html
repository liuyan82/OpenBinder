<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenBinder: SDatabase Class Reference</title>
<link href="doxygenPSI.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<h1>SDatabase Class Reference</h1><!-- doxytag: class="SDatabase" --><code>#include &lt;<a class="el" href="SDatabase_8h-source.html">storage/SDatabase.h</a>&gt;</code>
<p>
<a href="classSDatabase-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Convenience class for opening and managing reference on a Data Manager database. 
<p>
<code>SDatabase</code> is a local-only (non-Binder) convenience class that helps applications manage one or more references to a single open database. The underlying open database is a per-process singleton. Multiple instances of <code>SDatabase</code> in the same process which refer to the same open database will increment a reference count on that database. When the last <code>SDatabase</code> instance referring to a particular database is freed, that database is closed again.<p>
<dl compact><dt><b></b></dt><dd>Use <a class="el" href="classSDatabase.html#z88_1">GetOpenRef()</a> to recover a <code>DmOpenRef</code> with which standard Data Manager routines may be used.</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>You may open a database dmModeWrite or <code>dmModeReadWrite</code> if you wish; however, <em>no reader-writer locking of any kind</em> is provided by <code>SDatabase</code>, so you'll need to control concurrent access yourself. <code>SDatabase</code> is purely a resource-management tool.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>DataMgr.h (for Data Manager routines), <a class="el" href="classBDatabaseStore.html">BDatabaseStore</a> (a slightly more complex database wrapper for reading resources).</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>Develop a concurrent version, <code>SConcurrentDatabase</code>, which can perform reader-writer locking. </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Database Access</div></td></tr>
<tr><td colspan="2"><div class="groupText">Retrieve the database that was opened. <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DatabaseID&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z88_0">DbID</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the database id for it.  <a href="#z88_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DmOpenRef&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z88_1">GetOpenRef</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the <code>DmOpenRef</code> for the open database.  <a href="#z88_1"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Bookkeeping</div></td></tr>
<tr><td colspan="2"><div class="groupText">Creation, destruction, etc.<p>
The non-trivial constructors will open the database requested, leaving it open until all <a class="el" href="classSDatabase.html">SDatabase</a> instances referring to it are destroyed.<p>
Note that there is no default mode for DatabaseID database access, to prevent ambiguity with the type/creator constructor signature <br><br></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_0">IsValid</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>.  <a href="#z87_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSDatabase.html">SDatabase</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_1">operator=</a> (const <a class="el" href="classSDatabase.html">SDatabase</a> &amp;o)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Copy another SDatabase into this one.  <a href="#z87_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_2">SDatabase</a> (const <a class="el" href="classSDatabase.html">SDatabase</a> &amp;orig)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Increments the refcount on the database.  <a href="#z87_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_3">SDatabase</a> (<a class="el" href="group__Core.html#ga2">type_code</a> dbType, <a class="el" href="group__Core.html#ga2">type_code</a> dbCreator, DmOpenModeType mode, DbShareModeType share)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a database by type and creator.  <a href="#z87_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_4">SDatabase</a> (const char *dbName, <a class="el" href="group__Core.html#ga2">type_code</a> dbCreator, DmOpenModeType mode, DbShareModeType share)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a database by name and creator.  <a href="#z87_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_5">SDatabase</a> (DatabaseID dbID, DmOpenModeType mode, DbShareModeType share)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a database by DatabaseID.  <a href="#z87_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_6">SDatabase</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>.  <a href="#z87_6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_7">Status</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_8">StatusCheck</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Data Mgr error, if any, associated with opening the database.  <a href="#z87_8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSDatabase.html#z87_9">~SDatabase</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>.  <a href="#z87_9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>PrvOpenDbAtom</b></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="z87_6"></a><!-- doxytag: member="SDatabase::SDatabase" ref="z87_6" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_5"></a><!-- doxytag: member="SDatabase::SDatabase" ref="z87_5" args="(DatabaseID dbID, DmOpenModeType mode, DbShareModeType share)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DatabaseID&nbsp;</td>
          <td class="mdname" nowrap> <em>dbID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DmOpenModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DbShareModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>share</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open a database by DatabaseID. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_4"></a><!-- doxytag: member="SDatabase::SDatabase" ref="z87_4" args="(const char *dbName, type_code dbCreator, DmOpenModeType mode, DbShareModeType share)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dbName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Core.html#ga2">type_code</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dbCreator</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DmOpenModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DbShareModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>share</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open a database by name and creator. 
<p>
<dl compact><dt><b>See also:</b></dt><dd>DmFindDatabase() </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_3"></a><!-- doxytag: member="SDatabase::SDatabase" ref="z87_3" args="(type_code dbType, type_code dbCreator, DmOpenModeType mode, DbShareModeType share)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga2">type_code</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dbType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Core.html#ga2">type_code</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>dbCreator</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DmOpenModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>DbShareModeType&nbsp;</td>
          <td class="mdname" nowrap> <em>share</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open a database by type and creator. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_2"></a><!-- doxytag: member="SDatabase::SDatabase" ref="z87_2" args="(const SDatabase &amp;orig)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSDatabase.html">SDatabase</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>orig</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Increments the refcount on the database. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_9"></a><!-- doxytag: member="SDatabase::~SDatabase" ref="z87_9" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">~<a class="el" href="classSDatabase.html">SDatabase</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z88_0"></a><!-- doxytag: member="SDatabase::DbID" ref="z88_0" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DatabaseID DbID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the database id for it. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z88_1"></a><!-- doxytag: member="SDatabase::GetOpenRef" ref="z88_1" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DmOpenRef GetOpenRef           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the <code>DmOpenRef</code> for the open database. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_0"></a><!-- doxytag: member="SDatabase::IsValid" ref="z87_0" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool IsValid           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Equivalent to <code>(<a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a>==errNone)</code>. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_1"></a><!-- doxytag: member="SDatabase::operator=" ref="z87_1" args="(const SDatabase &amp;o)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSDatabase.html">SDatabase</a> &amp; operator=           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSDatabase.html">SDatabase</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>o</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Copy another SDatabase into this one. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_7"></a><!-- doxytag: member="SDatabase::Status" ref="z87_7" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> Status           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000004">Deprecated:</a></b></dt><dd>Use <a class="el" href="classSDatabase.html#z87_8">StatusCheck()</a> instead.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="z87_8"></a><!-- doxytag: member="SDatabase::StatusCheck" ref="z87_8" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> StatusCheck           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Data Mgr error, if any, associated with opening the database. 
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="SDatabase_8h-source.html">SDatabase.h</a><li><a class="el" href="SDatabase_8cpp.html">SDatabase.cpp</a></ul>
<div class="footer">
<hr>
<!--address style="align: right;"-->
<I>
<small>
<a href="http://www.palmsource.com/"><img name="ps_logo" src="../ps_logo.gif" width="96" height="54" align="left" border="0" alt=""></a>  Generated on Wed Dec 28 22:33:32 2005 by Doxygen 1.4.4 for OpenBinder Documentation Version 1.0
<P>
<a href="http://www.palmsource.com/">PalmSource, Inc.</A> &copy; 2005 &nbsp;
</small>
<!--/address-->
</I>
</div>
</body>
</html>
