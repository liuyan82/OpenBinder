<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenBinder: BStreamDatum Class Reference</title>
<link href="doxygenPSI.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<h1>BStreamDatum Class Reference<br>
<small>
[<a class="el" href="group__CoreSupportDataModel.html">Data Model</a>]</small>
</h1><!-- doxytag: class="BStreamDatum" --><!-- doxytag: inherits="BGenericDatum" --><code>#include &lt;<a class="el" href="StreamDatum_8h-source.html">storage/StreamDatum.h</a>&gt;</code>
<p>
<p>Inheritance diagram for BStreamDatum:
<p><center><img src="classBStreamDatum.png" usemap="#BStreamDatum_map" border="0" alt=""></center>
<map name="BStreamDatum_map">
<area href="classBGenericDatum.html" alt="BGenericDatum" shape="rect" coords="55,224,155,248">
<area href="classBnDatum.html" alt="BnDatum" shape="rect" coords="55,168,155,192">
<area href="classIDatum.html" alt="IDatum" shape="rect" coords="0,112,100,136">
<area href="classBBinder.html" alt="BBinder" shape="rect" coords="110,112,210,136">
<area href="classIInterface.html" alt="IInterface" shape="rect" coords="0,56,100,80">
<area href="classIBinder.html" alt="IBinder" shape="rect" coords="110,56,210,80">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="0,0,100,24">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="110,0,210,24">
<area href="classBValueDatum.html" alt="BValueDatum" shape="rect" coords="0,336,100,360">
<area href="classSDatumGeneratorInt_1_1IndexedDatum.html" alt="SDatumGeneratorInt::IndexedDatum" shape="rect" coords="110,336,210,360">
</map>
<a href="classBStreamDatum-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Base implementation of <a class="el" href="classIDatum.html">IDatum</a> from stream-like data operations. 
<p>
This is the standard base implementation of <a class="el" href="classIDatum.html">IDatum</a>. It takes care of all the <a class="el" href="classIDatum.html">IDatum</a> APIs, introducing new higher-level virtuals that derived classes can then implement. In particular, it introduces a locking regimen to the class, and a standard implementation of <a class="el" href="classBStreamDatum.html#z90_0">Open()</a> that generates stream objects which call back on to BStreamDatum for their implementation.<p>
There are two general approaches derived classes can take to create a concrete class: using a stream model or a memory model.<p>
To use a stream model, you will need to implement at least the virtuals <a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked()</a>, StoreLocked(), <a class="el" href="classBStreamDatum.html#z92_0">ReadLocked()</a>, and <a class="el" href="classBStreamDatum.html#z92_2">WriteLocked()</a>. You may also implement other virtuals to provide additional functionality (such as <a class="el" href="classBStreamDatum.html#z91_5">StoreValueTypeLocked()</a>) or a more optimal implementation (such as <a class="el" href="classBStreamDatum.html#z91_4">StoreValueLocked()</a>).<p>
To use a memory model, you will need to implement at least the virtuals <a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked()</a>, <a class="el" href="classBStreamDatum.html#z91_2">SizeLocked()</a>, <a class="el" href="classBStreamDatum.html#z93_2">StartReadingLocked()</a>, <a class="el" href="classBStreamDatum.html#z93_0">FinishReadingLocked()</a>, <a class="el" href="classBStreamDatum.html#z93_3">StartWritingLocked()</a>, and <a class="el" href="classBStreamDatum.html#z93_1">FinishWritingLocked()</a>. You will also almost always be able to provide a better implementation of <a class="el" href="classBStreamDatum.html#z91_4">StoreValueLocked()</a> and <a class="el" href="classBStreamDatum.html#z91_6">ValueLocked()</a>, so should do so.
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>New IDatum Virtuals</h2></td></tr>
<tr><td colspan="2">Subclasses must implement SizeLocked() and StoreSizeLocked() as part of the basic protocol. You can override the other virtuals to customize/optimize how values are returned. You don't need to do your own locking, since these are called with the datum lock held. You also don't need to worry about pushing properties or events as a result of changes, which will also be done for you by this class. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classBStreamDatum.html#z91_0w2">TYPE_CHANGED</a> =  0x0001, 
<a class="el" href="classBStreamDatum.html#z91_0w1">SIZE_CHANGED</a> =  0x0002, 
<a class="el" href="classBStreamDatum.html#z91_0w0">DATA_CHANGED</a> =  0x0004
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;editor, uint32_t changes, off_t start=-1, off_t length=-1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called when any part of the datum (data, type, size) changes.  <a href="#z91_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual off_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_2">SizeLocked</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Derived classes must implement to return the total amount of data available.  <a href="#z91_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked</a> (off_t size)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Derived classes must implement to set the total amount of data.  <a href="#z91_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_4">StoreValueLocked</a> (const <a class="el" href="classSValue.html">SValue</a> &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation changes the contents of the datum to the value.  <a href="#z91_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_5">StoreValueTypeLocked</a> (uint32_t type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation does nothing, returning B_UNSUPPORTED.  <a href="#z91_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSValue.html">SValue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_6">ValueLocked</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation generates a new <a class="el" href="classSValue.html">SValue</a> from the datum.  <a href="#z91_6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z91_7">ValueTypeLocked</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation returns B_RAW_TYPE.  <a href="#z91_7"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Bookkeeping</h2></td></tr>
<tr><td colspan="2">Creation, destruction, locking, etc. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_0">BStreamDatum</a> (const <a class="el" href="classSContext.html">SContext</a> &amp;context, uint32_t mode=IDatum::READ_WRITE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_1">BStreamDatum</a> (uint32_t mode=IDatum::READ_WRITE)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="structlock__status__t.html">lock_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_2">Lock</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Lock the datum's state.  <a href="#z89_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_3">Mode</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the mode flags the class was instantiated with.  <a href="#z89_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_4">Unlock</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unlock the datum's state.  <a href="#z89_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_5">RestrictMode</a> (uint32_t requested, uint32_t limit)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a new mode value based on a requested mode and desired read/write limitations.  <a href="#z89_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z89_6">~BStreamDatum</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Stream Virtuals</h2></td></tr>
<tr><td colspan="2">These virtuals allow you to implement memory operations on the datum. Return a buffer of data from the Start functions, which will be read or written as needed; you can do whatever cleanup is needed after that in the Finish functions. Note that StartWritingLocked() (or FinishWritingLocked()) MUST take care of the B_WRITE_END flag for truncating the datum size.<p>
You are guaranteed that the datum will not be unlocked between the start and end calls.<p>
<dl compact><dt><b>Note:</b></dt><dd>These functions will be called with stream set to NULL when being used by the default implementation of ValueLocked() and StoreValueLocked(). </dd></dl>
<br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z93_0">FinishReadingLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, const void *data) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation does nothing.  <a href="#z93_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z93_1">FinishWritingLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation does nothing.  <a href="#z93_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z93_2">StartReadingLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, off_t position, ssize_t *inoutSize, uint32_t flags) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation returns NULL.  <a href="#z93_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z93_3">StartWritingLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, off_t position, ssize_t *inoutSize, uint32_t flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default implementation returns NULL.  <a href="#z93_3"></a><br></td></tr>
<tr><td colspan="2"><br><h2>IDatum Implementation</h2></td></tr>
<tr><td colspan="2">This class provides a default implementation of the <a class="el" href="classIDatum.html">IDatum</a> API. You will need to fill in the new pure virtuals it has to have a concrete implementation. <br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_0">Open</a> (uint32_t mode, const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;editor=NULL, uint32_t newType=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> object on the datum.  <a href="#z90_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_1">SetSize</a> (off_t size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_2">SetSizeLocked()</a>.  <a href="#z90_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_2">SetSizeLocked</a> (off_t size)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uses <a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked()</a> to change the size and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate.  <a href="#z90_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_3">SetValue</a> (const <a class="el" href="classSValue.html">SValue</a> &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_4">SetValueLocked()</a>.  <a href="#z90_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_4">SetValueLocked</a> (const <a class="el" href="classSValue.html">SValue</a> &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uses <a class="el" href="classBStreamDatum.html#z91_4">StoreValueLocked()</a> to change the value and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate.  <a href="#z90_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_5">SetValueType</a> (uint32_t type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_6">SetValueTypeLocked()</a>.  <a href="#z90_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_6">SetValueTypeLocked</a> (uint32_t type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uses <a class="el" href="classBStreamDatum.html#z91_5">StoreValueTypeLocked()</a> to change the type and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate.  <a href="#z90_6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual off_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_7">Size</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_2">SizeLocked()</a>.  <a href="#z90_7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSValue.html">SValue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_8">Value</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_6">ValueLocked()</a>.  <a href="#z90_8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z90_9">ValueType</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_7">ValueTypeLocked()</a>.  <a href="#z90_9"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Raw Stream Virtuals</h2></td></tr>
<tr><td colspan="2">These virtuals allow you to implement raw byte stream operations on the datum. These are used to implement stream-style datums, such as one representing a file on a filesystem. The default implementation translates these into the memory-style operations StartReadingLocked(), FinishReadingLocked(), StartWritingLocked(), and FinishWritingLocked().<p>
One case where you may need to override these instead is to implement datums that can block when reading or writing. In that case you can temporarily unlock the datum while inside these functions (need to check if the implementation here will actually be happy with that).<p>
<dl compact><dt><b>Note:</b></dt><dd>These functions will be called with stream set to NULL when being used by the default implementation of ValueLocked() and StoreValueLocked(). </dd></dl>
<br><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z92_0">ReadLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, off_t position, const struct iovec *vector, ssize_t count, uint32_t flags) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve bytes from the datum and place them into the iovec.  <a href="#z92_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z92_1">SyncLocked</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Block until all data has been written to storage.  <a href="#z92_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual ssize_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#z92_2">WriteLocked</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;stream, off_t position, const struct iovec *vector, ssize_t count, uint32_t flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write bytes from the iovec into the datum.  <a href="#z92_2"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum.html#n0">Stream</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An open stream on <a class="el" href="classBStreamDatum.html">BStreamDatum</a>.  <a href="classBStreamDatum_1_1Stream.html#_details">More...</a><br></td></tr>
</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="z91_0"></a><!-- doxytag: member="BStreamDatum::@0" ref="z91_0" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">anonymous enum          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="z91_0w2"></a><!-- doxytag: member="TYPE_CHANGED" ref="z91_0w2" args="" -->TYPE_CHANGED</em>&nbsp;</td><td>
Use with <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> when the type property has changed. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="z91_0w1"></a><!-- doxytag: member="SIZE_CHANGED" ref="z91_0w1" args="" -->SIZE_CHANGED</em>&nbsp;</td><td>
Use with <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> when the size property has changed. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="z91_0w0"></a><!-- doxytag: member="DATA_CHANGED" ref="z91_0w0" args="" -->DATA_CHANGED</em>&nbsp;</td><td>
Use with <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> when the data contents have changed. </td></tr>
</table>
</dl>

<p>
Reimplemented from <a class="el" href="classIDatum.html">IDatum</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="z89_1"></a><!-- doxytag: member="BStreamDatum::BStreamDatum" ref="z89_1" args="(uint32_t mode=IDatum::READ_WRITE)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBStreamDatum.html">BStreamDatum</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>mode</em> = <code>IDatum::READ_WRITE</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z89_0"></a><!-- doxytag: member="BStreamDatum::BStreamDatum" ref="z89_0" args="(const SContext &amp;context, uint32_t mode=IDatum::READ_WRITE)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBStreamDatum.html">BStreamDatum</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSContext.html">SContext</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em> = <code>IDatum::READ_WRITE</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z89_6"></a><!-- doxytag: member="BStreamDatum::~BStreamDatum" ref="z89_6" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">~<a class="el" href="classBStreamDatum.html">BStreamDatum</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z93_0"></a><!-- doxytag: member="BStreamDatum::FinishReadingLocked" ref="z93_0" args="(const sptr&lt; Stream &gt; &amp;stream, const void *data) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void FinishReadingLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation does nothing. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_0">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_0">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z93_1"></a><!-- doxytag: member="BStreamDatum::FinishWritingLocked" ref="z93_1" args="(const sptr&lt; Stream &gt; &amp;stream, void *data)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void FinishWritingLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation does nothing. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_1">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_1">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z89_2"></a><!-- doxytag: member="BStreamDatum::Lock" ref="z89_2" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structlock__status__t.html">lock_status_t</a> Lock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lock the datum's state. 
<p>
To keep itself consistent, this class provides a public lock that is used when doing read/write operations on the class state as well as the actual data. The default implemention of this method acquires an internal lock. You can override it to cause all internal implementation to acquire some other lock. Be sure to also override <a class="el" href="classBStreamDatum.html#z89_4">Unlock()</a> if doing so. 
<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z42_1">SDatumGeneratorInt::IndexedDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z89_3"></a><!-- doxytag: member="BStreamDatum::Mode" ref="z89_3" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t Mode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the mode flags the class was instantiated with. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z90_0"></a><!-- doxytag: member="BStreamDatum::Open" ref="z90_0" args="(uint32_t mode, const sptr&lt; IBinder &gt; &amp;editor=NULL, uint32_t newType=0)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; Open           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>editor</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>newType</em> = <code>0</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a new <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> object on the datum. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a3">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z92_0"></a><!-- doxytag: member="BStreamDatum::ReadLocked" ref="z92_0" args="(const sptr&lt; Stream &gt; &amp;stream, off_t position, const struct iovec *vector, ssize_t count, uint32_t flags) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t ReadLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct iovec *&nbsp;</td>
          <td class="mdname" nowrap> <em>vector</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ssize_t&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve bytes from the datum and place them into the iovec. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z91_1"></a><!-- doxytag: member="BStreamDatum::ReportChangeLocked" ref="z91_1" args="(const sptr&lt; IBinder &gt; &amp;editor, uint32_t changes, off_t start=-1, off_t length=-1)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ReportChangeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>editor</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>changes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>start</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em> = <code>-1</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when any part of the datum (data, type, size) changes. 
<p>
The default implementation pushes the appropriate properties and events based on the <em>changes</em> flags, which may be any of TYPE_CHANGED, SIZE_CHANGED, or DATA_CHANGED. The value property is always pushed. For DATA_CHANGED, <em>start</em> and <em>length</em> must be supplied with the range of data that changed; for all other changes, <a class="el" href="classBStreamDatum.html#z91_6">ValueLocked()</a>, <a class="el" href="classBStreamDatum.html#z91_7">ValueTypeLocked()</a>, and <a class="el" href="classBStreamDatum.html#z91_2">SizeLocked()</a> are called as needed to retrieve the current values.<p>
You can override this method in your own subclass to easily discover when changes happen. If you do so, be sure to also call through to this implementation. 
<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_2">SDatumGeneratorInt::IndexedDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z89_5"></a><!-- doxytag: member="BStreamDatum::RestrictMode" ref="z89_5" args="(uint32_t requested, uint32_t limit)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t RestrictMode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>requested</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>limit</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return a new mode value based on a requested mode and desired read/write limitations. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z90_1"></a><!-- doxytag: member="BStreamDatum::SetSize" ref="z90_1" args="(off_t size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">off_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_2">SetSizeLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a4">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z90_2"></a><!-- doxytag: member="BStreamDatum::SetSizeLocked" ref="z90_2" args="(off_t size)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> SetSizeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">off_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Uses <a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked()</a> to change the size and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z90_3"></a><!-- doxytag: member="BStreamDatum::SetValue" ref="z90_3" args="(const SValue &amp;value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetValue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_4">SetValueLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a5">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z90_4"></a><!-- doxytag: member="BStreamDatum::SetValueLocked" ref="z90_4" args="(const SValue &amp;value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> SetValueLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Uses <a class="el" href="classBStreamDatum.html#z91_4">StoreValueLocked()</a> to change the value and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z90_5"></a><!-- doxytag: member="BStreamDatum::SetValueType" ref="z90_5" args="(uint32_t type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetValueType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z90_6">SetValueTypeLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a6">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z90_6"></a><!-- doxytag: member="BStreamDatum::SetValueTypeLocked" ref="z90_6" args="(uint32_t type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> SetValueTypeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Uses <a class="el" href="classBStreamDatum.html#z91_5">StoreValueTypeLocked()</a> to change the type and calls <a class="el" href="classBStreamDatum.html#z91_1">ReportChangeLocked()</a> as appropriate. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z90_7"></a><!-- doxytag: member="BStreamDatum::Size" ref="z90_7" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">off_t Size           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_2">SizeLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a7">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_2"></a><!-- doxytag: member="BStreamDatum::SizeLocked" ref="z91_2" args="() const =0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual off_t SizeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Derived classes must implement to return the total amount of data available. 
<p>

<p>
Implemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_3">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_2">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z93_2"></a><!-- doxytag: member="BStreamDatum::StartReadingLocked" ref="z93_2" args="(const sptr&lt; Stream &gt; &amp;stream, off_t position, ssize_t *inoutSize, uint32_t flags) const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const void * StartReadingLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ssize_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>inoutSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation returns NULL. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_4">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_3">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z93_3"></a><!-- doxytag: member="BStreamDatum::StartWritingLocked" ref="z93_3" args="(const sptr&lt; Stream &gt; &amp;stream, off_t position, ssize_t *inoutSize, uint32_t flags)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void * StartWritingLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ssize_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>inoutSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation returns NULL. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_5">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_4">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_3"></a><!-- doxytag: member="BStreamDatum::StoreSizeLocked" ref="z91_3" args="(off_t size)=0" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a> StoreSizeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">off_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Derived classes must implement to set the total amount of data. 
<p>

<p>
Implemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_6">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_5">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_4"></a><!-- doxytag: member="BStreamDatum::StoreValueLocked" ref="z91_4" args="(const SValue &amp;value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> StoreValueLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation changes the contents of the datum to the value. 
<p>
The datum is changed by calling <a class="el" href="classBStreamDatum.html#z91_5">StoreValueTypeLocked()</a>, <a class="el" href="classBStreamDatum.html#z91_3">StoreSizeLocked()</a>, and StoreLocked(). This is fairly inefficient, so you will want to provide your own implementation if possible. 
<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_7">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_6">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_5"></a><!-- doxytag: member="BStreamDatum::StoreValueTypeLocked" ref="z91_5" args="(uint32_t type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> StoreValueTypeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint32_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>type</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation does nothing, returning B_UNSUPPORTED. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_8">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_7">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z92_1"></a><!-- doxytag: member="BStreamDatum::SyncLocked" ref="z92_1" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> SyncLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Block until all data has been written to storage. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="z89_4"></a><!-- doxytag: member="BStreamDatum::Unlock" ref="z89_4" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Unlock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Unlock the datum's state. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z42_2">SDatumGeneratorInt::IndexedDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z90_8"></a><!-- doxytag: member="BStreamDatum::Value" ref="z90_8" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSValue.html">SValue</a> Value           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_6">ValueLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a9">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_6"></a><!-- doxytag: member="BStreamDatum::ValueLocked" ref="z91_6" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSValue.html">SValue</a> ValueLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation generates a new <a class="el" href="classSValue.html">SValue</a> from the datum. 
<p>
The <a class="el" href="classSValue.html">SValue</a> is created by calling <a class="el" href="classBStreamDatum.html#z91_7">ValueTypeLocked()</a>, <a class="el" href="classBStreamDatum.html#z91_2">SizeLocked()</a>, and <a class="el" href="classBStreamDatum.html#z92_0">ReadLocked()</a>. This is fairly inefficient, so you will want to provide your own implementation if possible. It will not attempt to return the datum as an <a class="el" href="classSValue.html">SValue</a> if the datum is larger than a reasonable size (a couple kilobytes). 
<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_9">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_8">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z90_9"></a><!-- doxytag: member="BStreamDatum::ValueType" ref="z90_9" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t ValueType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquires the datum lock and calls <a class="el" href="classBStreamDatum.html#z91_7">ValueTypeLocked()</a>. 
<p>

<p>
Implements <a class="el" href="classIDatum.html#a10">IDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z91_7"></a><!-- doxytag: member="BStreamDatum::ValueTypeLocked" ref="z91_7" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t ValueTypeLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default implementation returns B_RAW_TYPE. 
<p>

<p>
Reimplemented in <a class="el" href="classSDatumGeneratorInt_1_1IndexedDatum.html#z43_10">SDatumGeneratorInt::IndexedDatum</a>, and <a class="el" href="classBValueDatum.html#z102_9">BValueDatum</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z92_2"></a><!-- doxytag: member="BStreamDatum::WriteLocked" ref="z92_2" args="(const sptr&lt; Stream &gt; &amp;stream, off_t position, const struct iovec *vector, ssize_t count, uint32_t flags)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ssize_t WriteLocked           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>off_t&nbsp;</td>
          <td class="mdname" nowrap> <em>position</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct iovec *&nbsp;</td>
          <td class="mdname" nowrap> <em>vector</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>ssize_t&nbsp;</td>
          <td class="mdname" nowrap> <em>count</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write bytes from the iovec into the datum. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="n0"></a><!-- doxytag: member="BStreamDatum::Stream" ref="n0" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class <a class="el" href="classBStreamDatum_1_1Stream.html">Stream</a><code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="StreamDatum_8h-source.html">StreamDatum.h</a><li><a class="el" href="StreamDatum_8cpp.html">StreamDatum.cpp</a></ul>
<div class="footer">
<hr>
<!--address style="align: right;"-->
<I>
<small>
<a href="http://www.palmsource.com/"><img name="ps_logo" src="../ps_logo.gif" width="96" height="54" align="left" border="0" alt=""></a>  Generated on Wed Dec 28 22:33:31 2005 by Doxygen 1.4.4 for OpenBinder Documentation Version 1.0
<P>
<a href="http://www.palmsource.com/">PalmSource, Inc.</A> &copy; 2005 &nbsp;
</small>
<!--/address-->
</I>
</div>
</body>
</html>
