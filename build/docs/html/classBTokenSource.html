<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>OpenBinder: BTokenSource Class Reference</title>
<link href="doxygenPSI.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<h1>BTokenSource Class Reference<br>
<small>
[<a class="el" href="group__CoreSupportBinder.html">Binder</a>]</small>
</h1><!-- doxytag: class="BTokenSource" --><!-- doxytag: inherits="BnNode,BnIterable,SHandler" --><code>#include &lt;<a class="el" href="TokenSource_8h-source.html">support/TokenSource.h</a>&gt;</code>
<p>
<p>Inheritance diagram for BTokenSource:
<p><center><img src="classBTokenSource.png" usemap="#BTokenSource_map" border="0" alt=""></center>
<map name="BTokenSource_map">
<area href="classBnNode.html" alt="BnNode" shape="rect" coords="52,168,147,192">
<area href="classBnIterable.html" alt="BnIterable" shape="rect" coords="262,168,357,192">
<area href="classSHandler.html" alt="SHandler" shape="rect" coords="367,168,462,192">
<area href="classINode.html" alt="INode" shape="rect" coords="0,112,95,136">
<area href="classBBinder.html" alt="BBinder" shape="rect" coords="105,112,200,136">
<area href="classIIterable.html" alt="IIterable" shape="rect" coords="210,112,305,136">
<area href="classBBinder.html" alt="BBinder" shape="rect" coords="315,112,410,136">
<area href="classIInterface.html" alt="IInterface" shape="rect" coords="0,56,95,80">
<area href="classIBinder.html" alt="IBinder" shape="rect" coords="105,56,200,80">
<area href="classIInterface.html" alt="IInterface" shape="rect" coords="210,56,305,80">
<area href="classIBinder.html" alt="IBinder" shape="rect" coords="315,56,410,80">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="0,0,95,24">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="105,0,200,24">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="210,0,305,24">
<area href="classSAtom.html" alt="SAtom" shape="rect" coords="315,0,410,24">
</map>
<a href="classBTokenSource-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
A Binder class used to implement mutual access control. 
<p>
When you create one of these, and access the "token" <a class="el" href="classICatalog.html">ICatalog</a> property, or the GetToken method, it returns you an <a class="el" href="classSValue.html">SValue</a> containing an <a class="el" href="classIBinder.html">IBinder</a>. If someone else already has a reference to this <a class="el" href="classIBinder.html">IBinder</a>, it gives you the same one. If nobody else has it, it gives you a new one. When the <a class="el" href="classIBinder.html">IBinder</a> is created, a binder method you specify is called on an object you specify. When the last reference on the <a class="el" href="classIBinder.html">IBinder</a> is released, another binder method is called.<p>
To specify which objects and binder calls are made, pass the following into the args parameter of the constructor: <div class="fragment"><pre class="fragment">args=@{
    acquired-&gt;{ object-&gt;$target, call-&gt;$bindercall },
    released-&gt;{ object-&gt;$target, call-&gt;$bindercall }
}
</pre></div> target can be any <a class="el" href="classIBinder.html">IBinder</a> (binder object) bindercall can either be just a function name, or a function name mapped to arguments: <div class="fragment"><pre class="fragment">bindercall=@{ FunctionName }
bindercall=@{ FunctionName-&gt;0-&gt;arg0 }
bindercall=@{ FunctionName-&gt;{ 0-&gt;arg0, 1-&gt;arg1 }
</pre></div>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a0">BTokenSource</a> (const <a class="el" href="classSContext.html">SContext</a> &amp;context, const <a class="el" href="classSValue.html">SValue</a> &amp;args)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classSValue.html">SValue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a1">GetToken</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a2">HandleMessage</a> (const <a class="el" href="classSMessage.html">SMessage</a> &amp;msg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Subclasses override this to receive messages.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a3">InitAtom</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Called the first time a strong reference is acquired. All significant object initialization should go here.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSValue.html">SValue</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a4">Inspect</a> (const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;caller, const <a class="el" href="classSValue.html">SValue</a> &amp;which, uint32_t flags=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Probe binder for interface information.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#a5">~BTokenSource</a> ()</td></tr>

<tr><td colspan="2"><div class="groupHeader">INode Interface</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classINode.html">INode</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_0">Attributes</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the meta-data catalog associated with this node, or NULL if it doesn't exist.  <a href="#z165_0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga1">nsecs_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_1">CreationDate</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "creationDate" meta-data entry, or 0 of it doesn't exist.  <a href="#z165_1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classSString.html">SString</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_2">MimeType</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "mimeType" meta-data entry, or "" if it doesn't exist.  <a href="#z165_2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga1">nsecs_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_3">ModifiedDate</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "modifiedDate" meta-data entry, or 0 of it doesn't exist.  <a href="#z165_3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_4">SetCreationDate</a> (<a class="el" href="group__Core.html#ga1">nsecs_t</a> value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "creationDate" meta-data entry, or 0 of it doesn't exist.  <a href="#z165_4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_5">SetMimeType</a> (const <a class="el" href="classSString.html">SString</a> &amp;value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "mimeType" meta-data entry, or "" if it doesn't exist.  <a href="#z165_5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_6">SetModifiedDate</a> (<a class="el" href="group__Core.html#ga1">nsecs_t</a> value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the "modifiedDate" meta-data entry, or 0 of it doesn't exist.  <a href="#z165_6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="group__Core.html#ga0">status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z165_7">Walk</a> (<a class="el" href="classSString.html">SString</a> *path, uint32_t flags, <a class="el" href="classSValue.html">SValue</a> *node)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Walk through the namespace based on the given path.  <a href="#z165_7"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">IIterable Interface</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIIterator.html">IIterator</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#z166_0">NewIterator</a> (const <a class="el" href="classSValue.html">SValue</a> &amp;args, <a class="el" href="group__Core.html#ga0">status_t</a> *error)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Walk through the namespace based on the given path.  <a href="#z166_0"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="classSContext.html">SContext</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#b0">Context</a> () const </td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBTokenSource.html#n0">Token</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>Token</b></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0"></a><!-- doxytag: member="BTokenSource::BTokenSource" ref="a0" args="(const SContext &amp;context, const SValue &amp;args)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBTokenSource.html">BTokenSource</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSContext.html">SContext</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>args</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="BTokenSource::~BTokenSource" ref="a5" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">~<a class="el" href="classBTokenSource.html">BTokenSource</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="z165_0"></a><!-- doxytag: member="BTokenSource::Attributes" ref="z165_0" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classINode.html">INode</a> &gt; Attributes           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the meta-data catalog associated with this node, or NULL if it doesn't exist. 
<p>
The <a class="el" href="classINode.html">INode</a> interface also supplies access to meta-data associated with the object. The "attributes" read-only property provides direct access to the meta-data node, which is a pointer to another separate <a class="el" href="classINode.html">INode</a> holding the meta-data. A node may not support meta-data, in which case the attributes property will return NULL.<p>
You will not usually use this property directly, instead using the mimeType, creationDate, and modifiedDate properties to read/write the standard attributes. Also see <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> for how you can retrieve these and other attributes through the normal path traversal mechanism.
<p>
Implements <a class="el" href="classINode.html#a0">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0"></a><!-- doxytag: member="BTokenSource::Context" ref="b0" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classSContext.html">SContext</a> &amp; Context           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented from <a class="el" href="classBBinder.html#a3">BBinder</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_1"></a><!-- doxytag: member="BTokenSource::CreationDate" ref="z165_1" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga1">nsecs_t</a> CreationDate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "creationDate" meta-data entry, or 0 of it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a1">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="BTokenSource::GetToken" ref="a1" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSValue.html">SValue</a> GetToken           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="BTokenSource::HandleMessage" ref="a2" args="(const SMessage &amp;msg)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> HandleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSMessage.html">SMessage</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Subclasses override this to receive messages. 
<p>

<p>
Reimplemented from <a class="el" href="classSHandler.html#z123_0">SHandler</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="BTokenSource::InitAtom" ref="a3" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void InitAtom           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called the first time a strong reference is acquired. All significant object initialization should go here. 
<p>
You can override it and do any setup you need. Note that you do not need to call the <a class="el" href="classSAtom.html">SAtom</a> implementation. (So you can derive from two different <a class="el" href="classSAtom.html">SAtom</a> implementations and safely call down to both of their <a class="el" href="classSAtom.html#z106_19">IncStrong()</a> methods.) <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classSAtom.html#z106_19">IncStrong()</a></dd></dl>

<p>
Reimplemented from <a class="el" href="classSAtom.html#z105_4">SAtom</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="BTokenSource::Inspect" ref="a4" args="(const sptr&lt; IBinder &gt; &amp;caller, const SValue &amp;which, uint32_t flags=0)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSValue.html">SValue</a> Inspect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIBinder.html">IBinder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>caller</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>which</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em> = <code>0</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Probe binder for interface information. 
<p>
Return interfaces implemented by this binder object that are requested by <em>which</em>. This is a composition of all interfaces, expressed as { descriptor -&gt; binder } mappings, which are selected through <em>which</em>.<p>
Much more information on <a class="el" href="classBTokenSource.html#a4">Inspect()</a> can be found at <a class="el" href="BinderInspect.html">Binder Inspect() Details</a>.
<p>
Reimplemented from <a class="el" href="classBnIterable.html#a0">BnIterable</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_2"></a><!-- doxytag: member="BTokenSource::MimeType" ref="z165_2" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSString.html">SString</a> MimeType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "mimeType" meta-data entry, or "" if it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a3">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_3"></a><!-- doxytag: member="BTokenSource::ModifiedDate" ref="z165_3" args="() const " --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga1">nsecs_t</a> ModifiedDate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "modifiedDate" meta-data entry, or 0 of it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a4">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z166_0"></a><!-- doxytag: member="BTokenSource::NewIterator" ref="z166_0" args="(const SValue &amp;args, status_t *error)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classsptr.html">sptr</a>&lt; <a class="el" href="classIIterator.html">IIterator</a> &gt; NewIterator           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSValue.html">SValue</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>args</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="group__Core.html#ga0">status_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>error</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Walk through the namespace based on the given path. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>args</em>&nbsp;</td><td>Iterator options as described below. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>error</em>&nbsp;</td><td>Status code from the call, B_OK if all is well else an error code. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The new <a class="el" href="classIIterator.html">IIterator</a> object on success, else NULL.</dd></dl>
The returned iterator has its own state, so you do not have to worry about other threads that may call Iterate() (they will get their own iterator). Most implementations will return a full <a class="el" href="classIRandomIterator.html">IRandomIterator</a>; use interface_cast&lt;T&gt; to retrieve that interface.<p>
Clients should usually use <a class="el" href="classSIterator.html">SIterator</a> instead of calling <a class="el" href="classBTokenSource.html#z166_0">NewIterator()</a> directly.<p>
The <em>options</em> parameter is used to control what data is returned by the iterator. The available options are fairly implementation-dependent, but some common ones are described here. Because you can not know what any given <a class="el" href="classIIterable.html">IIterable</a> object will be able to do, the <a class="el" href="classIIterator.html">IIterator</a> interface you get back has a read-only options property with which you can find out how it is configured. Any of the options supplied to IIterate() that it understands will be propagated to the options property in the form it understood them.<p>
<ul>
<li>"select" (a.k.a. BV_ITERABLE_SELECT) specifies a SQL projection, describing the columns to be included in the iterator results. It is a set of column names to include.</li><li>"filter" (a.k.a. BV_ITERABLE_FILTER) specifies an abstract filter (as a string) to be applied to the results, interpret in whatever way the <a class="el" href="classIIterable.html">IIterable</a> thinks makes the most sense.</li><li>"where" (a.k.a. BV_ITERABLE_WHERE) specifies a direct SQL WHERE clause, allowing you to filter the results contained in the iterator. This can be used with "filter" at the same time, in which case the result set will be the rows matching both of them.</li><li>"order_by" (a.k.a. BV_ITERABLE_ORDER_BY) specifies how to order entries returned by the iterator.</li></ul>
<p>
See <a class="el" href="BinderDataModel.html">Binder Data Model</a> for more detail on these options.<p>
<dl compact><dt><b>Implementation Details</b></dt><dd>Note that semantically each iterator you generate is passive for the set of entries, but the data inside each of those entries may change. That is, if the contents of the container changes, this will not impact the number of entries in any current active iterators. However, if the data inside one of those entries changes, then the next time any iterator requests the data for that entry it will get back the new data. If an entry is removed from the iterable, again the number of items in currently active iterators does not change; however, if that item is requested, both the key and value are returned with B_NULL_VALUE. </dd></dl>
<dl compact><dt><b></b></dt><dd>This requirement in place so that an iterator's results can be reasonably thread-safe. For example, if a list view gets an <a class="el" href="classIRandomIterator.html">IRandomIterator</a> to display an IIterable's contents, it can rely on the indices of that iterator being consistently mapped to the same entry in the iterable.</dd></dl>

<p>
Implements <a class="el" href="classIIterable.html#a1">IIterable</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_4"></a><!-- doxytag: member="BTokenSource::SetCreationDate" ref="z165_4" args="(nsecs_t value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetCreationDate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga1">nsecs_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "creationDate" meta-data entry, or 0 of it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a5">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_5"></a><!-- doxytag: member="BTokenSource::SetMimeType" ref="z165_5" args="(const SString &amp;value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetMimeType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSString.html">SString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "mimeType" meta-data entry, or "" if it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a6">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_6"></a><!-- doxytag: member="BTokenSource::SetModifiedDate" ref="z165_6" args="(nsecs_t value)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void SetModifiedDate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga1">nsecs_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the "modifiedDate" meta-data entry, or 0 of it doesn't exist. 
<p>

<p>
Implements <a class="el" href="classINode.html#a7">INode</a>.    </td>
  </tr>
</table>
<a class="anchor" name="z165_7"></a><!-- doxytag: member="BTokenSource::Walk" ref="z165_7" args="(SString *path, uint32_t flags, SValue *node)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="group__Core.html#ga0">status_t</a> Walk           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classSString.html">SString</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classSValue.html">SValue</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>node</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Walk through the namespace based on the given path. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>path</em>&nbsp;</td><td>Incoming, the '/'-separated path to traverse. Outgoing, if result is B_OK then this is either the remaining path to be walked or "" if the full path has been processed. Otherwise, the output value is not defined. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>flags</em>&nbsp;</td><td>Options controlling the traversal: REQUEST_DATA, COLLAPSE_NODE, CREATE_DATUM, CREATE_NODE. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>node</em>&nbsp;</td><td>The entry found at the given path. If REQUEST_DATA and COLLAPSE_NODE are not provides, this is always an <a class="el" href="classIBinder.html">IBinder</a> object; otherwise, it may be some <a class="el" href="classSValue.html">SValue</a> data structure as described below. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>B_OK if the <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> was successful (the <em>node</em> contains the result); else an error code on failure. A common error is B_ENTRY_NOT_FOUND if the path could not be resolved.</dd></dl>
The <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> method is used to find an object below the node, by traversing the given path through the namespace. You use separators ('/' -- forward slash) to separate components of the path. If your path contains no separators, you are requesting an object directly under the node.<p>
If the node supports attributes then the <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> method will allow you to traverse directly to them. This is accomplished by reserving path names whose first character is ":" to indicate that the name is part of the attribute namespace. Thus a <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> of just the path ":" will return the attributes catalog (and continue walking into it if needed); for a name with ':' as a prefix and additional text the node strips off the ':' and then calls <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> on the attributes catalog with the remaining text.<p>
Clients will generally not call <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> directly, instead relying on <a class="el" href="classSNode.html#z138_3">SNode::Walk()</a>. The latter hides a lot of the complexity of <a class="el" href="classINode.html#a9">INode::Walk()</a> that we will discuss later.<p>
The flags parameter allows you to control how the namespace walks your supplied path. These allow you to request optimizations to how <a class="el" href="classINode.html">INode</a> returns its result (REQUEST_DATA, COLLAPSE_NODE), and what it should do if segments of the path don't exist (CREATE_DATUM, CREATE_NODE).<p>
The REQUEST_DATA and COLLAPSE_NODE flags are optimization hints that allow you to bypass the "everything is an object" property of the namespace in certain situations. An <a class="el" href="classINode.html">INode</a> is not required to honor these requests (and indeed may be entirely unable to do so), so when using them it is the client's responsibility to deal with such a failure.<p>
<ul>
<li>REQUEST_DATA asks, if the final node in the path is an <a class="el" href="classIDatum.html">IDatum</a>, for it to return the actual data under its entry (as an <a class="el" href="classSValue.html">SValue</a>) instead of the <a class="el" href="classIDatum.html">IDatum</a> object holding that data. For simple read access of small pieces of data, this allows you to bypass the intermediate object. The node is free to ignore this request and return the <a class="el" href="classIDatum.html">IDatum</a> anyway.</li></ul>
<p>
<ul>
<li>COLLAPSE_NODE asks, if the final node in the path is an <a class="el" href="classINode.html">INode</a>, for it to return the name/value mappings it contains, as an <a class="el" href="classSValue.html">SValue</a> mapping, instead of the object itself. Again the node is free to ignore this request and return the object anyway.</li></ul>
<p>
You can combine REQUEST_DATA and COLLAPSE_NODE to ask for the final node to return an <a class="el" href="classSValue.html">SValue</a> mapping, where each value is actually data. If you use COLLAPSE_NODE without REQUEST_DATA, you will receive <a class="el" href="classSValue.html">SValue</a> mappings where the values are <a class="el" href="classIDatum.html">IDatum</a> objects.<p>
<ul>
<li>CREATE_CATALOG flag asks for the nodes parsing your path to automatically create intermediate objects if the requested entries along the path don't exist.</li></ul>
<p>
<ul>
<li>CREATE_DATUM flags asks that the final node in the path create a datum for you if one doesn't already exist.</li></ul>
<p>
<dl compact><dt><b>Note:</b></dt><dd>Never implement <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> directly yourself. Instead, derive from <a class="el" href="classBGenericNode.html">BGenericNode</a> which will take care of most of the following details for you.</dd></dl>
<dl compact><dt><b>Implementation Details</b></dt><dd>All implementations of <a class="el" href="classINode.html">INode</a> must correctly handle paths in their <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> implementation by finding the first path separator, looking up the node for the entry named by the text before the separator, and recursing into that node with the remaining path string. They must also correctly parse attribute names as described below. </dd></dl>
<dl compact><dt><b></b></dt><dd>This API is slightly complicated because a <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> operation does not have to be completed in a single call. The path parameter is also an output parameter, so the node hierarchy can evaluate only a portion of the path, and return the node and remaining path up to that point. Thus clients must repeatedly call <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> until the path is fully resolved or an error occurs. For example, the node structure will normally return early from <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> when it hits a point that hops across processes. </dd></dl>
<dl compact><dt><b></b></dt><dd>Making the path an in/out parameter also has a nice performance benefit: when a node is modifying the path to resolve it for the current level, this can be done in-place directly in the string argument, instead of having to construct a new string to hold the sub-path. </dd></dl>
<dl compact><dt><b></b></dt><dd>If an object is both an <a class="el" href="classINode.html">INode</a> and an <a class="el" href="classIDatum.html">IDatum</a> and REQUEST_DATA is used, the object should be treated as a datum (as its primary identity), and the REQUEST_DATA flag honored if possible. </dd></dl>
<dl compact><dt><b></b></dt><dd>Why is <a class="el" href="classBTokenSource.html#z165_7">Walk()</a> defined this way, instead of simply returning the final leaf? The primary reason is to give the node hierarchy the ability to control how much recursion happens. If it couldn't break the walk up into separate steps, then you may be required to recurse (potentially across many processes) extremely deep in order to perform the walk. In addition, performance should be better by splitting up the walk at each process boundary (though it is completely up to the implementation of a particular <a class="el" href="classINode.html">INode</a> to decide whether or not to return early from walk).</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>COLLAPSE_NODE should probably be removed. </dd></dl>

<p>
Implements <a class="el" href="classINode.html#a9">INode</a>.    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="n0"></a><!-- doxytag: member="BTokenSource::Token" ref="n0" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class Token<code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="TokenSource_8h-source.html">TokenSource.h</a><li><a class="el" href="TokenSource_8cpp.html">TokenSource.cpp</a></ul>
<div class="footer">
<hr>
<!--address style="align: right;"-->
<I>
<small>
<a href="http://www.palmsource.com/"><img name="ps_logo" src="../ps_logo.gif" width="96" height="54" align="left" border="0" alt=""></a>  Generated on Wed Dec 28 22:33:31 2005 by Doxygen 1.4.4 for OpenBinder Documentation Version 1.0
<P>
<a href="http://www.palmsource.com/">PalmSource, Inc.</A> &copy; 2005 &nbsp;
</small>
<!--/address-->
</I>
</div>
</body>
</html>
